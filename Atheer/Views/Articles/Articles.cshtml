@model Atheer.Services.ArticlesService.ArticlesResponse

@{
    ViewData["Title"] = "Articles";
}

@if (TempData.ContainsKey("Error"))
{
    <h5 class="text-danger">@TempData["Error"]</h5>
}

<h5 class="text-dark">
    @if (!string.IsNullOrEmpty(Model.TagTitle))
    {
        @Html.Raw("Tag: ")
        @Model.TagTitle
        <br/>
    }
    @if (Model.SpecificYear)
    {
        @Model.Year.ToString()
        @Html.Raw(" Articles")
    }
    else
    {
        @Html.Raw("Latest Articles")
    }
</h5>

@if (string.IsNullOrEmpty(Model.TagId))
{
    <h5 class="text-dark">Tags: </h5>
    <ul class="list-group list-group-horizontal flex-fill">
    @foreach (var tag in Model.MostPopularTags)
    {
        <li class="list-group-item">
            <a asp-controller="Articles" asp-action="Index" asp-route-tag="@tag.Id">@tag.Title (@tag.Count.ToString())</a>
        </li>
    }
    </ul>
}
else
{
    <ul class="list-group list-group-horizontal flex-fill">
        <li class="list-group-item">
            <a href="/">All tags</a>
        </li>
    </ul>
}

<div class="mt-3"></div>

@await Component.InvokeAsync("Articles", Model).ConfigureAwait(false)